
  <!DOCTYPE html>
  <html>
    <head>
      <title>Profile.tsx</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="..\..\..\..\assets\source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="..\..\..\..\assets\source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="..\..\..\..\index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="negative"><td class="">components\feature\setting\Profile.tsx</td><td class="">97.31%</td><td class="">99%</td><td class="">186</td><td class="">181</td><td class="">5</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import useAxios from &#x27;axios-hooks&#x27;;
import { FormEvent, FormEventHandler, useCallback, useRef } from &#x27;react&#x27;;
import Api from &#x27;../../../apis&#x27;;
import useAlert from &#x27;../../../hooks/useAlert&#x27;;
import { ShowCurrentUser } from &#x27;../../../pages/setting/SettingContainer&#x27;;

const apiSetting = new Api();

interface ProfileProps {
    currentUserData: ShowCurrentUser | undefined;
    currentUserLoading: boolean;
}
function Profile({ currentUserData, currentUserLoading }: ProfileProps) {
    const { setAlert } = useAlert();
    const formRef = useRef&lt;HTMLFormElement&gt;(null);
    const [{}, updateMeProfile] = useAxios(apiSetting.User.updateMeProfile(), { manual: true });
    const formSubmit: FormEventHandler = useCallback(
        (e: FormEvent) =&gt; {
            e.preventDefault();
            if (!formRef.current) return;
            const formData = new FormData(formRef.current);
            const data: any = {};
            formData.forEach((value, key) =&gt; (data[key] = value));
            updateMeProfile({
                data,
                ...apiSetting.User.updateMeProfile()
            }).then((res) =&gt; {
                if (res.data?.success) {
                    setAlert({ title: &#x27;儲存成功&#x27;, type: &#x27;success&#x27; });
                } else setAlert({ title: &#x27;儲存失敗&#x27;, type: &#x27;error&#x27; });
            });
        },
        [formRef, currentUserData]
    );
    return (
        &lt;div className=&quot;flex flex-col rounded-2xl bg-gray-100 px-12 py-6 border&quot;&gt;
            &lt;div className=&quot;flex flex-col&quot;&gt;
                &lt;h2 className=&quot;text-slate-900 font-bold text-xl ml-6 mb-6&quot;&gt;帳戶&lt;/h2&gt;
                {currentUserLoading ? (
                    &lt;div className=&quot;col-span-2 rounded-lg bg-white p-6 shadow flex flex-col gap-6&quot;&gt;
                        載入中...
                    &lt;/div&gt;
                ) : (
                    &lt;form ref={formRef} onSubmit={formSubmit}&gt;
                        &lt;div className=&quot;col-span-2 rounded-t-lg bg-white p-6 shadow flex flex-col gap-6&quot;&gt;
                            &lt;label className=&quot;flex flex-col gap-2&quot;&gt;
                                &lt;div&gt;用戶暱稱&lt;/div&gt;
                                &lt;input
                                    type=&quot;text&quot;
                                    name=&quot;nickname&quot;
                                    defaultValue={currentUserData?.user?.nickname || &#x27;&#x27;}
                                    className=&quot;appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm&quot;
                                /&gt;
                            &lt;/label&gt;
                            &lt;label className=&quot;flex flex-col gap-2&quot;&gt;
                                &lt;div&gt;電話號碼&lt;/div&gt;
                                &lt;input
                                    type=&quot;text&quot;
                                    name=&quot;phone&quot;
                                    defaultValue={currentUserData?.user?.phone || &#x27;&#x27;}
                                    className=&quot;appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm&quot;
                                /&gt;
                            &lt;/label&gt;
                            &lt;label className=&quot;flex flex-col gap-2&quot;&gt;
                                &lt;div&gt;職位&lt;/div&gt;
                                &lt;input
                                    type=&quot;text&quot;
                                    name=&quot;position&quot;
                                    defaultValue={currentUserData?.user?.position || &#x27;&#x27;}
                                    className=&quot;appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm&quot;
                                /&gt;
                            &lt;/label&gt;
                            &lt;div className=&quot;grid grid-cols-2 gap-6&quot;&gt;
                                &lt;label className=&quot;flex flex-col gap-2&quot;&gt;
                                    &lt;div&gt;出生日期&lt;/div&gt;
                                    &lt;input
                                        type=&quot;date&quot;
                                        name=&quot;date_of_birth&quot;
                                        defaultValue={currentUserData?.user?.date_of_birth || &#x27;&#x27;}
                                        className=&quot;appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm&quot;
                                    /&gt;
                                &lt;/label&gt;
                                &lt;div className=&quot;flex flex-col gap-2&quot;&gt;
                                    &lt;div&gt;性別&lt;/div&gt;
                                    &lt;div className=&quot;flex gap-4&quot;&gt;
                                        &lt;label className=&quot;flex gap-2 items-center&quot;&gt;
                                            &lt;input
                                                type=&quot;radio&quot;
                                                name=&quot;sex&quot;
                                                value=&quot;1&quot;
                                                defaultChecked={currentUserData?.user?.sex === 1}
                                            /&gt;
                                            &lt;span&gt;男&lt;/span&gt;
                                        &lt;/label&gt;
                                        &lt;label className=&quot;flex gap-2 items-center&quot;&gt;
                                            &lt;input
                                                type=&quot;radio&quot;
                                                name=&quot;sex&quot;
                                                value=&quot;0&quot;
                                                defaultChecked={currentUserData?.user?.sex === 0}
                                            /&gt;
                                            &lt;span&gt;女&lt;/span&gt;
                                        &lt;/label&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div className=&quot;bg-gray-50 rounded-b-lg px-6 py-3 flex justify-end shadow-md&quot;&gt;
                            &lt;button className=&quot;text-white bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg&quot;&gt;
                                保存
                            &lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/form&gt;
                )}
            &lt;/div&gt;
        &lt;/div&gt;
    );
}

export default Profile;
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;components\\feature\\setting\\Profile.tsx&quot;,&quot;line&quot;:21,&quot;character&quot;:18,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;components\\feature\\setting\\Profile.tsx&quot;,&quot;line&quot;:22,&quot;character&quot;:46,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;components\\feature\\setting\\Profile.tsx&quot;,&quot;line&quot;:24,&quot;character&quot;:16,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;components\\feature\\setting\\Profile.tsx&quot;,&quot;line&quot;:27,&quot;character&quot;:24,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;components\\feature\\setting\\Profile.tsx&quot;,&quot;line&quot;:27,&quot;character&quot;:30,&quot;text&quot;:&quot;success&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 03 Aug 2023 09:19:42 GMT</p>
    </body>
  </html>
  